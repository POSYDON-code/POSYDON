

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PSyGrid object &mdash; posydon 2.0.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=d66fa8e6" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=adc66a14"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Post-processing pipeline" href="pipeline.html" />
    <link rel="prev" title="Processing Pipeline" href="../processing-pipeline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/posydon_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction-acknowledgements/intro.html">Introduction, Objectives, and Scope</a></li>
<li class="toctree-l1"><a class="reference external" href="https://posydon.org/team.html">Collaborative Team</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ui.adsabs.harvard.edu/public-libraries/ZZsD9bzLTzWnLV3hwyJxbA">Publications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation-guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-grids.html">Quick Start: Examining the MESA Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-population.html">Quick Start: Your First Population</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials and Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-examples/population-synthesis/binary-pop-syn.html">Binary-Star Population Synthesis with POSYDON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-examples/generating-datasets/generating-datasets.html">Crafting the Core Datasets for POSYDON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-examples/MESA-grids/running-grids.html">Architecting MESA Simulation Grids with POSYDON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">In-Depth Components Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../mesa-grids.html">MESA Grids API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../processing-pipeline.html">Processing Pipeline</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#"><cite>PSyGrid</cite> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline.html">Post-processing pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_ini.html">Documentation of the <code class="samp docutils literal notranslate"><span class="pre">ini</span></code> file for the post-processing pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../machine-learning-components.html">Machine Learning Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stellar-binary-simulation.html">Stellar &amp; Binary-star Simulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/posydon.html">posydon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference/bin.html">executables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Releases and Datasets</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/POSYDON-code/POSYDON/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://zenodo.org/communities/posydon/">Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support and Contact</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contact-support/contact-information.html">Contact Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting-faqs/installation-issues.html">Common Installation Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting-faqs/code-questions.html">Code Usage Questions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/POSYDON-code/POSYDON/issues/new/choose">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/how-to-contribute.html">How To Contribute</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">posydon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../processing-pipeline.html">Processing Pipeline</a></li>
      <li class="breadcrumb-item active"><cite>PSyGrid</cite> object</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/components-overview/post_processing/psygrid.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="psygrid-object">
<span id="psygrid"></span><h1><cite>PSyGrid</cite> object<a class="headerlink" href="#psygrid-object" title="Link to this heading"></a></h1>
<p>The <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object contains the data coming from detailed MESA
simulations.</p>
<p>Import the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> module with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">posydon.grids.psygrid</span><span class="w"> </span><span class="kn">import</span> <span class="n">PSyGrid</span>
</pre></div>
</div>
<section id="initializing-a-psygrid-object">
<h2>Initializing a <cite>PSyGrid</cite> object<a class="headerlink" href="#initializing-a-psygrid-object" title="Link to this heading"></a></h2>
<p>You can instantiate a new <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span> <span class="o">=</span> <span class="n">PSyGrid</span><span class="p">()</span>
</pre></div>
</div>
<p>This calls the initializer, which can take two optional arguments</p>
<ul class="simple">
<li><p><code class="samp docutils literal notranslate"><span class="pre">filepath</span></code>: this is the path to the associated <code class="samp docutils literal notranslate"><span class="pre">h5</span></code> file; if the
file exists, the initializer will load the contained <cite>PSyGrid</cite> object</p></li>
<li><p><code class="samp docutils literal notranslate"><span class="pre">verbose</span></code>: this is a boolean indicating whether detailed output should
be, given when calling functions of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object</p></li>
</ul>
</section>
<section id="creating-a-psygrid-object">
<h2>Creating a <cite>PSyGrid</cite> object<a class="headerlink" href="#creating-a-psygrid-object" title="Link to this heading"></a></h2>
<p>The <code class="samp docutils literal notranslate"><span class="pre">create</span></code> function of a <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object will read MESA output
data into the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object. It has a required argument,
<code class="samp docutils literal notranslate"><span class="pre">MESA_grid_path</span></code>, which is the path to the directory containing the MESA
runs. There are several optional arguments as well:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Optional arguments of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> creation</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 18.0%" />
<col style="width: 10.0%" />
<col style="width: 72.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>psygrid_path</p></td>
<td><p>None</p></td>
<td><p>the path to the associated <code class="samp docutils literal notranslate"><span class="pre">h5</span></code> file (required if none was specified during initialization)</p></td>
</tr>
<tr class="row-odd"><td><p>overwrite</p></td>
<td><p>False</p></td>
<td><p>if <code class="samp docutils literal notranslate"><span class="pre">True</span></code>, overwrite any file that exists</p></td>
</tr>
<tr class="row-even"><td><p>slim</p></td>
<td><p>False</p></td>
<td><p>if <code class="samp docutils literal notranslate"><span class="pre">True</span></code>, only store initial/final values and metadata</p></td>
</tr>
<tr class="row-odd"><td><p>warn</p></td>
<td><p>“end”</p></td>
<td><p>if <code class="samp docutils literal notranslate"><span class="pre">normal</span></code>, warnings are printed, when they arise</p>
<p>if <code class="samp docutils literal notranslate"><span class="pre">end</span></code>, all warnings are printed at the end</p>
<p>if <code class="samp docutils literal notranslate"><span class="pre">suppress</span></code>, no warnings are printed</p>
</td>
</tr>
<tr class="row-even"><td><p>fmt</p></td>
<td><p>“posydon”</p></td>
<td><p>grid format; only <code class="samp docutils literal notranslate"><span class="pre">posydon</span></code> is currently supported</p></td>
</tr>
<tr class="row-odd"><td><p>**grid_kwargs</p></td>
<td></td>
<td><p>further grid configuration properties can be specified in a dictionary</p></td>
</tr>
</tbody>
</table>
<p>The <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object has the following grid configuration properties:</p>
<span id="tab-grid-properties"></span><table class="docutils align-default" id="id2">
<caption><span class="caption-text">Grid configuration properties</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘description’</p></td>
<td><p>“”</p></td>
<td><p>description text</p></td>
</tr>
<tr class="row-odd"><td><p>‘max_number_of_runs’</p></td>
<td><p>None</p></td>
<td><p>the maximum number of runs</p></td>
</tr>
<tr class="row-even"><td><p>‘format’</p></td>
<td><p>“hdf5”</p></td>
<td><p>file format; only <code class="samp docutils literal notranslate"><span class="pre">hdf5</span></code> is currently supported</p></td>
</tr>
<tr class="row-odd"><td><p>‘compression’</p></td>
<td><p>“gzip9”</p></td>
<td><p>the compression (of the hdf5 file)</p></td>
</tr>
<tr class="row-even"><td><p>‘history_DS_error’</p></td>
<td><p>None</p></td>
<td><p>the maximum error allowed when downsampling the history</p></td>
</tr>
<tr class="row-odd"><td><p>‘history_DS_exclude’</p></td>
<td><p>default list</p></td>
<td><p>the history columns to exclude from downsampling (default list = [“model_number”, “age”, “star_age”])</p></td>
</tr>
<tr class="row-even"><td><p>‘profile_DS_error’</p></td>
<td><p>None</p></td>
<td><p>the maximum error allowed when downsampling the final profile</p></td>
</tr>
<tr class="row-odd"><td><p>‘profile_DS_interval’</p></td>
<td><p>None</p></td>
<td><p>the maximum change in an downsampled interval relative to the change from initial to final</p></td>
</tr>
<tr class="row-even"><td><p>‘profile_DS_exclude’</p></td>
<td><p>default list</p></td>
<td><p>the profile columns to exclude from downsampling (default list = [“mass”, “star_mass”])</p></td>
</tr>
<tr class="row-odd"><td><p>‘star1_history_saved_columns’</p></td>
<td><p>“minimum”</p></td>
<td><p>specifies which history columns of star 1 should be read</p>
<p>if <code class="samp docutils literal notranslate"><span class="pre">all</span></code>, read all the columns in the MESA output</p>
<p>if <code class="samp docutils literal notranslate"><span class="pre">minimum</span></code>, use the default</p>
<p>if a tuple of column names, read only those columns</p>
<p>if a list of column names, read the default and those columns</p>
</td>
</tr>
<tr class="row-even"><td><p>‘star2_history_saved_columns’</p></td>
<td><p>“minimum”</p></td>
<td><p>specifies which history columns of star 2 should be read (same options as star1_history_saved_columns)</p></td>
</tr>
<tr class="row-odd"><td><p>‘binary_history_saved_columns’</p></td>
<td><p>“minimum”</p></td>
<td><p>specifies which binary history columns should be read (same options as star1_history_saved_columns)</p></td>
</tr>
<tr class="row-even"><td><p>‘star1_profile_saved_columns’</p></td>
<td><p>“minimum”</p></td>
<td><p>specifies which profile columns of star 1 should be read (same options as star1_history_saved_columns)</p></td>
</tr>
<tr class="row-odd"><td><p>‘star2_profile_saved_columns’</p></td>
<td><p>“minimum”</p></td>
<td><p>specifies which profile columns of star 2 should be read (same options as star1_history_saved_columns)</p></td>
</tr>
<tr class="row-even"><td><p>‘initial_value_columns’</p></td>
<td><p>None</p></td>
<td><p>history columns from which to store initial values (currently not in use, instead all specified history columns are used as well as the abundances X, Y, and Z)</p></td>
</tr>
<tr class="row-odd"><td><p>‘final_value_columns’</p></td>
<td><p>None</p></td>
<td><p>history columns from which to store final values (currently not in use, instead all specified history columns are used as well as termination flags and for binaries the interpolation class)</p></td>
</tr>
<tr class="row-even"><td><p>‘start_at_RLO’</p></td>
<td><p>False</p></td>
<td><p>specifies whether to crop the history to start at RLO</p></td>
</tr>
<tr class="row-odd"><td><p>‘stop_before_carbon_depletion’</p></td>
<td><p>False</p></td>
<td><p>specifies whether to crop the history of massive stars (&gt;100 Msun) to stop at 10% central carbon and after helium is depleted</p></td>
</tr>
<tr class="row-even"><td><p>‘binary’</p></td>
<td><p>True</p></td>
<td><p>specifies whether a grid evolved binaries; put <code class="samp docutils literal notranslate"><span class="pre">False</span></code> for single stars</p></td>
</tr>
<tr class="row-odd"><td><p>‘eep’</p></td>
<td><p>None</p></td>
<td><p>path to directory with EEP files (for single stars only)</p></td>
</tr>
<tr class="row-even"><td><p>‘initial_RLO_fix’</p></td>
<td><p>False</p></td>
<td><p>specifies whether the boundary of initial RLO should be determined to flag all systems below as initial RLO independent of the MESA output</p></td>
</tr>
<tr class="row-odd"><td><p>‘He_core_fix’</p></td>
<td><p>True</p></td>
<td><p>specifies to ensure that the helium core is always larger or equal to the carbon-oxygen core</p></td>
</tr>
<tr class="row-even"><td><p>‘accept_missing_profile’</p></td>
<td><p>False</p></td>
<td><p>specifies whether try to include all data from MESA runs without final profiles</p></td>
</tr>
</tbody>
</table>
<p>You can read the MESA data into an existing <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object, which may
overwrite data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">MESA_grid_path</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can combine the initialization with creation of the grid
based on MESA data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span> <span class="o">=</span> <span class="n">PSyGrid</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">MESA_grid_path</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="loading-a-psygrid-object">
<h2>Loading a <cite>PSyGrid</cite> object<a class="headerlink" href="#loading-a-psygrid-object" title="Link to this heading"></a></h2>
<p>You can load an existing <code class="samp docutils literal notranslate"><span class="pre">h5</span></code> file (e.g. “myPSyGrid.h5”) into a
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;myPSyGrid.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It may be more convenient to load the file directly when initializing the
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span> <span class="o">=</span> <span class="n">PSyGrid</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;myPSyGrid.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="contents-of-a-psygrid-object">
<h2>Contents of a <cite>PSyGrid</cite> object<a class="headerlink" href="#contents-of-a-psygrid-object" title="Link to this heading"></a></h2>
<section id="print-a-psygrid-object">
<h3>Print a <cite>PSyGrid</cite> object<a class="headerlink" href="#print-a-psygrid-object" title="Link to this heading"></a></h3>
<p>You can check the contents of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object with a print command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">mygrid</span><span class="p">)</span>
</pre></div>
</div>
<p>This will provide a summary, which tell you:</p>
<ul class="simple">
<li><p>to which hdf5 file it is connected</p></li>
<li><p>how many runs are in the grid and how many have</p>
<ul>
<li><p>a binary history</p></li>
<li><p>a history of star 1</p></li>
<li><p>a history of star 2</p></li>
<li><p>a final profile of star 1</p></li>
<li><p>a final profile of star 2</p></li>
</ul>
</li>
<li><p>which histories/profile fields are included in the last run</p></li>
<li><p>which initial and final values are stored in the grid</p></li>
<li><p>information about the grid configuration</p></li>
<li><p>a shorthand list of the MESA directories (the locations of the data the runs
where extracted from)</p></li>
</ul>
<p>To access single runs, it is important to know how many are there to avoid
calling a nonexisting run. You can find the number of runs with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">mygrid</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alternatively, you can request the length internally with
<code class="samp docutils literal notranslate"><span class="pre">mygrid.n_runs</span></code>.</p>
</div>
</section>
<section id="accessing-data-in-a-psygrid-object">
<h3>Accessing data in a <cite>PSyGrid</cite> object<a class="headerlink" href="#accessing-data-in-a-psygrid-object" title="Link to this heading"></a></h3>
<p>The first data you may want to check are the
<a class="reference internal" href="#tab-grid-properties"><span class="std std-ref">grid configuration properties</span></a>. You can get a list
of the properties available for your <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<p>You can access the value of any grid configuration property “PROPERTY” with
<code class="samp docutils literal notranslate"><span class="pre">mygrid.config[</span><em><span class="pre">PROPERTY</span></em><span class="pre">]</span></code>.</p>
<p>Next, you can look at the initial and final values of the runs. All the values
are available at <code class="samp docutils literal notranslate"><span class="pre">mygrid.initial_values</span></code> and <code class="samp docutils literal notranslate"><span class="pre">mygrid.final_values</span></code>,
respectively. To get a tuple of all the available values use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">initial_values</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
<span class="n">mygrid</span><span class="o">.</span><span class="n">final_values</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
</pre></div>
</div>
<p>You can access the initial value of any physical grid property “PHYS” with
<code class="samp docutils literal notranslate"><span class="pre">mygrid.initial_values[</span><em><span class="pre">PHYS</span></em><span class="pre">]</span></code>. It will return a numpy array with the
values of this property for all the runs.
Note that these physical properties of the binaries in the grid are different
from the grid configuration properties listed above.
Then, you can find the initial mass of star 1 in the third MESA run with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">initial_values</span><span class="p">[</span><span class="s1">&#39;star_1_mass&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that the first run has the index <code class="samp docutils literal notranslate"><span class="pre">0</span></code> and the last one
<code class="samp docutils literal notranslate"><span class="pre">len(mygrid)-1</span></code>.</p>
</div>
<p>Each grid property will have the same number and order of MESA run entries
in the initial and final values. This holds for the list of MESA directories
from which the runs are extracted, too.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">MESA_dirs</span>
</pre></div>
</div>
<p>You can retrieve individual runs by index. <code class="samp docutils literal notranslate"><span class="pre">mygrid[</span><em><span class="pre">IDX</span></em><span class="pre">]</span></code> is a
<code class="samp docutils literal notranslate"><span class="pre">PSyRunView</span></code> object, which contains the data of the run of index
<code class="samp docutils literal notranslate"><span class="pre">IDX</span></code>. The <code class="samp docutils literal notranslate"><span class="pre">PSyRunView</span></code> object contains seven components:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text"><code class="samp docutils literal notranslate"><span class="pre">PSyRunView</span></code> object components</span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘initial_values’</p></td>
<td><p>all initial values of the run</p></td>
</tr>
<tr class="row-odd"><td><p>‘final_values’</p></td>
<td><p>all final values of the run including termination flags</p></td>
</tr>
<tr class="row-even"><td><p>‘binary_history’</p></td>
<td><p>the binary history</p></td>
</tr>
<tr class="row-odd"><td><p>‘history1’</p></td>
<td><p>the history of star 1</p></td>
</tr>
<tr class="row-even"><td><p>‘history2’</p></td>
<td><p>the history of star 2</p></td>
</tr>
<tr class="row-odd"><td><p>‘final_profile1’</p></td>
<td><p>the final profile of star 1</p></td>
</tr>
<tr class="row-even"><td><p>‘final_profile2’</p></td>
<td><p>the final profile of star 2</p></td>
</tr>
</tbody>
</table>
<p>Again, you can check for the contents of the individual runs with
<code class="samp docutils literal notranslate"><span class="pre">dtype.names</span></code>, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myrun</span> <span class="o">=</span> <span class="n">mygrid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">myrun</span><span class="p">[</span><span class="s1">&#39;binary_history&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
</pre></div>
</div>
<p>The example above finds the initial mass of star 1 in the third MESA run by
indexing the list <code class="samp docutils literal notranslate"><span class="pre">mygrid.initial_values</span></code>.
You can get the same value from the list of initial values associated with a
single MESA run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;initial_values&#39;</span><span class="p">][</span><span class="s1">&#39;star_1_mass&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can get something close to the initial value with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;binary_history&#39;</span><span class="p">][</span><span class="s1">&#39;star_1_mass&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>But this will not give the initial value, while it is close to it.
This is because MESA has a slightly different value in the
first line of the history files compared to the given initial value. The final
values and the derived initial values instead are the same as the last or first
values in the corresponding history.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For efficiency reasons not all the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object is loaded into
RAM. Instead parts are reads from the associated hdf5 file if needed.
For this reason, it is discouraged to refer to the same values
more than once in a code. If you need the same value more often, you should
store it in a local variable.</p>
</div>
</section>
<section id="plot-a-psygrid-object">
<h3>Plot a <cite>PSyGrid</cite> object<a class="headerlink" href="#plot-a-psygrid-object" title="Link to this heading"></a></h3>
<p>Beside getting the values, there are plotting functionalities available
to display the content of a <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object. There are three main
plotting functionalities:</p>
<ul class="simple">
<li><p><code class="samp docutils literal notranslate"><span class="pre">plot</span></code>: This creates a one-dimensional plot from the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code>.
An example can be found in the <a class="reference internal" href="../../tutorials-examples/generating-datasets/generating-datasets.html#plot-1d"><span class="std std-ref">tutorials</span></a>. The code details
are available in the
<a class="reference internal" href="../../api_reference/posydon.grids.html#posydon.grids.psygrid.PSyGrid.plot" title="posydon.grids.psygrid.PSyGrid.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">PSyGrid.plot</span></code></a> code and the
<a class="reference internal" href="../../api_reference/posydon.visualization.html#module-posydon.visualization.plot1D" title="posydon.visualization.plot1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">visualization</span></code></a> library.</p></li>
<li><p><code class="samp docutils literal notranslate"><span class="pre">plot2D</span></code>: This creates a two-dimensional representation from the
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code>. Again, an example can be found in the
<a class="reference internal" href="../../tutorials-examples/generating-datasets/generating-datasets.html#plot-2d"><span class="std std-ref">tutorials</span></a>. The code details are available in the
<a class="reference internal" href="../../api_reference/posydon.grids.html#posydon.grids.psygrid.PSyGrid.plot2D" title="posydon.grids.psygrid.PSyGrid.plot2D"><code class="xref py py-func docutils literal notranslate"><span class="pre">PSyGrid.plot</span></code></a> code and the
<a class="reference internal" href="../../api_reference/posydon.visualization.html#module-posydon.visualization.plot2D" title="posydon.visualization.plot2D"><code class="xref py py-class docutils literal notranslate"><span class="pre">visualization</span></code></a> library.</p></li>
<li><p><code class="samp docutils literal notranslate"><span class="pre">HR</span></code>: This is similar to <code class="samp docutils literal notranslate"><span class="pre">plot</span></code> but specialized for producing
Hertzsprung–Russell diagrams.</p></li>
</ul>
</section>
</section>
<section id="work-on-with-a-psygrid-object">
<h2>Work on/with a <cite>PSyGrid</cite> object<a class="headerlink" href="#work-on-with-a-psygrid-object" title="Link to this heading"></a></h2>
<section id="loop-over-a-psygrid-object">
<h3>Loop over a <cite>PSyGrid</cite> object<a class="headerlink" href="#loop-over-a-psygrid-object" title="Link to this heading"></a></h3>
<p>Similarly to accessing a single value in the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object, we can
loop over a <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object, which will loop over the individual runs
in the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object. Hence the following two code snippets will
produce the same output. The first one loops through the numpy array of the
initial companion masses:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">mass</span> <span class="ow">in</span> <span class="n">mygrid</span><span class="o">.</span><span class="n">initial_values</span><span class="p">[</span><span class="s1">&#39;star_2_mass&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mass</span><span class="p">)</span>
</pre></div>
</div>
<p>while the second one loops through the runs and prints the initial companion
mass of each one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">mygrid</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="p">[</span><span class="s1">&#39;initial_values&#39;</span><span class="p">][</span><span class="s1">&#39;star_2_mass&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="expand-a-psygrid-object">
<h3>Expand a <cite>PSyGrid</cite> object<a class="headerlink" href="#expand-a-psygrid-object" title="Link to this heading"></a></h3>
<p>Because of the complexity of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object, we encourage users
to only use our dedicated functions to add content to the object. There is a
function to add an extra column to the <code class="samp docutils literal notranslate"><span class="pre">final_values</span></code>. Here is an example
of how to add a new column that contains the final orbital period, in units of
years instead of days:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_column_data</span> <span class="o">=</span> <span class="n">mygrid</span><span class="o">.</span><span class="n">final_values</span><span class="p">[</span><span class="s1">&#39;period_days&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">365.25</span>
<span class="n">mygrid</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;period_years&#39;</span><span class="p">,</span> <span class="n">new_column_data</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;final_values&#39;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The four arguments are a string with the name of the new field, the data to be
stored in the column, the component of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object to which the
column will be added, and a boolean indicating whether the column should
overwrite any existing column with the same name.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The new data has to have as many entries as the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object has
runs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, the parameter <code class="samp docutils literal notranslate"><span class="pre">where</span></code> only supports the value
‘final_values’.</p>
</div>
</section>
<section id="join-two-or-more-psygrid-objects">
<h3>Join two or more <cite>PSyGrid</cite> objects<a class="headerlink" href="#join-two-or-more-psygrid-objects" title="Link to this heading"></a></h3>
<p>There are different reasons why you might have several <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> objects
that you would like to combine into a single grid later, e.g. adding reruns.
POSYDON has a function called <code class="samp docutils literal notranslate"><span class="pre">join_grids</span></code> to do this for you.
To avoid too many conflicts with possible modifications of already loaded
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> objects, this function is not part of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code>
object class. Instead, it takes as an argument the list of
paths to the hdf5 files containing <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> objects to be combined to a
new one, and then a path to the hdf5 file of the new grid to be generated.
The <code class="samp docutils literal notranslate"><span class="pre">join_grids</span></code> function will check whether the grids are compatible
and join them if possible. Additionally, you can optionally specify the
arguments <code class="samp docutils literal notranslate"><span class="pre">compression</span></code>, <code class="samp docutils literal notranslate"><span class="pre">description</span></code>, and <code class="samp docutils literal notranslate"><span class="pre">verbose</span></code>.</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Arguments of the <code class="samp docutils literal notranslate"><span class="pre">join_grids</span></code> function</span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>input_paths</p></td>
<td><p>None</p></td>
<td><p>list of the paths to the grid files to be joined</p></td>
</tr>
<tr class="row-odd"><td><p>output_path</p></td>
<td><p>None</p></td>
<td><p>path for the new grid file containing the joined grid.</p></td>
</tr>
<tr class="row-even"><td><p>compression</p></td>
<td><p>‘gzip9’</p></td>
<td><p>compression details</p></td>
</tr>
<tr class="row-odd"><td><p>description</p></td>
<td><p>‘joined’</p></td>
<td><p>description of the new joined grid</p></td>
</tr>
<tr class="row-even"><td><p>verbose</p></td>
<td><p>True</p></td>
<td><p>whether the function reports by printing to standard output.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are common systems in two or more grids, this routine will only
put the last run with same initial conditions in the newly combined
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object.</p>
</div>
<p>We recommend that you use the <a class="reference internal" href="pipeline.html#pipeline"><span class="std std-ref">post-processing pipeline</span></a> to
create and join grids.</p>
</section>
<section id="get-reruns-from-a-psygrid-object">
<h3>Get reruns from a <cite>PSyGrid</cite> object<a class="headerlink" href="#get-reruns-from-a-psygrid-object" title="Link to this heading"></a></h3>
<p>Usually, not all runs of a grid will be successfully run in MESA. You
may want to rerun some of them with changed parameters. The function
<code class="samp docutils literal notranslate"><span class="pre">rerun</span></code> exports runs from a <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object to be run again.
There are two options:</p>
<p>1. Write your own logic and create a numpy array with the indices of the
systems that you would like to run again.
2. Specify which termination flag(s) necessitate a rerun of the system.</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Arguments of the <code class="samp docutils literal notranslate"><span class="pre">rerun</span></code> function</span><a class="headerlink" href="#id5" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>path_to_file</p></td>
<td><p>‘./’</p></td>
<td><p>where to create the file(s) for the rerun</p></td>
</tr>
<tr class="row-odd"><td><p>runs_to_rerun</p></td>
<td><p>None</p></td>
<td><p>a list containing the indices of the runs in the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object</p></td>
</tr>
<tr class="row-even"><td><p>termination_flags</p></td>
<td><p>None</p></td>
<td><p>a single termination flag code, or a list of them</p></td>
</tr>
<tr class="row-odd"><td><p>new_mesa_flag</p></td>
<td><p>None</p></td>
<td><p>dictionary with the names and the values of MESA parameters to be changed for the inlists of the new runs</p></td>
</tr>
<tr class="row-even"><td><p>flags_to_check</p></td>
<td><p>None</p></td>
<td><p>a termination flag key or a list of them (if <code class="samp docutils literal notranslate"><span class="pre">None</span></code>, check only ‘termination_flag_1’)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If both <code class="samp docutils literal notranslate"><span class="pre">runs_to_rerun</span></code> and <code class="samp docutils literal notranslate"><span class="pre">termination_flags</span></code> are given, all
systems matching at least one of the two conditions will be selected for
rerun.</p>
</div>
<p>The <a class="reference internal" href="pipeline/pipeline_steps.html#pipeline-stepr"><span class="std std-ref">post-processing pipeline</span></a> provides some pre-defined
rerun options.</p>
</section>
<section id="close-associated-hdf5-file">
<h3>Close associated hdf5 file<a class="headerlink" href="#close-associated-hdf5-file" title="Link to this heading"></a></h3>
<p>Finally, you can close the hdf5 file, which is recommended to ensure that all
your changes on the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object are safely written into the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mygrid</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>This is also done if you call the destructor of the
<code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">mygrid</span>
</pre></div>
</div>
<p>The code summary of the <code class="samp docutils literal notranslate"><span class="pre">PSyGrid</span></code> object can be found at the
<a class="reference internal" href="../../api_reference/posydon.grids.html#module-posydon.grids.psygrid" title="posydon.grids.psygrid"><code class="xref py py-class docutils literal notranslate"><span class="pre">psygrid</span></code></a> reference page.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../processing-pipeline.html" class="btn btn-neutral float-left" title="Processing Pipeline" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.html" class="btn btn-neutral float-right" title="Post-processing pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Tassos Fragos.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      Version: 2.0.4
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        
        <dl>
            <dt> v2</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v2.0.6/index.html">2.0</a></dd>
            
            <dd><a href="https://posydon.org/POSYDON/v2.1.5/index.html">2.1</a></dd>
            
        </dl>
        
        <dl>
            <dt> v1</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v1.0.5/index.html">1.0</a></dd>
            
        </dl>
        
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>