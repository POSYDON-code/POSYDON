

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code Usage Questions &mdash; posydon 2.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d66fa8e6" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=c2377ec0"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How To Contribute" href="../contributing/how-to-contribute.html" />
    <link rel="prev" title="Common Installation Issues" href="installation-issues.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/posydon_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction-acknowledgements/intro.html">Introduction, Objectives, and Scope</a></li>
<li class="toctree-l1"><a class="reference external" href="https://posydon.org/team.html">Collaborative Team</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ui.adsabs.harvard.edu/public-libraries/ZZsD9bzLTzWnLV3hwyJxbA">Publications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation-guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-grids.html">Quick Start: Examining the MESA Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-population.html">Quick Start: Your First Population</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials and Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-examples/population-synthesis/binary-pop-syn.html">Binary-Star Population Synthesis with POSYDON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-examples/generating-datasets/generating-datasets.html">Crafting the Core Datasets for POSYDON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-examples/MESA-grids/running-grids.html">Architecting MESA Simulation Grids with POSYDON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">In-Depth Components Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../components-overview/mesa-grids.html">MESA Grids API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components-overview/processing-pipeline.html">Processing Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components-overview/machine-learning-components.html">Machine Learning Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components-overview/stellar-binary-simulation.html">Stellar &amp; Binary-star Simulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/posydon.html">posydon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/bin.html">executables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Releases and Datasets</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/POSYDON-code/POSYDON/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://zenodo.org/communities/posydon/">Datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support and Contact</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contact-support/contact-information.html">Contact Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation-issues.html">Common Installation Issues</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Usage Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#frequently-asked-questions">Frequently Asked Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-resources">Additional Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#still-have-questions">Still Have Questions?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/POSYDON-code/POSYDON/issues/new/choose">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/how-to-contribute.html">How To Contribute</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">posydon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Code Usage Questions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/troubleshooting-faqs/code-questions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="code-usage-questions">
<span id="code-usage"></span><h1>Code Usage Questions<a class="headerlink" href="#code-usage-questions" title="Link to this heading"></a></h1>
<p>Welcome to the code usage FAQ for POSYDON. This section is designed to answer questions related to how to use various features and functionalities of POSYDON. If your question isn’t addressed here, consider reaching out to our <a class="reference internal" href="../contact-support/contact-information.html#contact-info"><span class="std std-ref">support channels</span></a> or checking our <a class="reference internal" href="installation-issues.html#installation-issues"><span class="std std-ref">general FAQ</span></a>.</p>
<section id="frequently-asked-questions">
<h2>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><dl class="simple">
<dt><strong>How do I start a basic population synthesis simulation with POSYDON?</strong></dt><dd><p>Start with the <a class="reference internal" href="../tutorials-examples/population-synthesis/binary-pop-syn.html#binary-pop-syn"><span class="std std-ref">binary population synthesis guide</span></a> to learn how to run POSYDON.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>I’m getting an error when using the</strong> <code class="docutils literal notranslate"><span class="pre">where</span></code> <strong>parameter in the</strong> <code class="docutils literal notranslate"><span class="pre">select</span></code> <strong>function</strong></dt><dd><p>If you’re trying to select based on values in an unsupported column, you’ll receive an error message like the one below.
Only specific columns are supported for selection. These are limited to string columns, the indices, and the column names.
Please perform the selection in-memory instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">population</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;S1_mass &gt; 10&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code will produce the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ValueError</span><span class="p">:</span> <span class="n">The</span> <span class="n">passed</span> <span class="n">where</span> <span class="n">expression</span> <span class="n">S1_mass</span> <span class="o">&gt;</span> <span class="mi">10</span>
<span class="n">contains</span> <span class="n">an</span> <span class="n">invalid</span> <span class="n">variable</span> <span class="n">reference</span><span class="o">.</span> <span class="n">All</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span> <span class="n">references</span>
<span class="n">must</span> <span class="n">be</span> <span class="n">a</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">an</span> <span class="n">axis</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="s1">&#39;index&#39;</span> <span class="ow">or</span> <span class="s1">&#39;columns&#39;</span><span class="p">),</span> <span class="ow">or</span> <span class="n">a</span> <span class="n">data_column</span><span class="o">.</span>
<span class="n">The</span> <span class="n">currently</span> <span class="n">defined</span> <span class="n">references</span> <span class="n">are</span><span class="p">:</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">step_names</span><span class="p">,</span> <span class="n">S1_state</span><span class="p">,</span> <span class="n">S2_state</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>How should I tune my memory usage for a population synthesis run?</strong></dt><dd><p>A population run requires a bare minimum of 8GB of memory per CPU. The DR2 POSYDON grids need to be loaded in completely. At the moment, the binary grids are loaded in at startup, but single star models are loaded when needed.
However, 8GB allows you to run a small population, but it restricts the number of binaries you can keep in memory and requires a <code class="code docutils literal notranslate"><span class="pre">dump_rate</span> <span class="pre">&lt;</span> <span class="pre">1000</span></code> to keep the memory usage low, which slows down the simulation.</p>
<p>As such, 9GB or 10GB per CPU is a better starting point. This allows you to keep more binaries in memory and increases the speed of the population synthesis run and work well with with a <code class="code docutils literal notranslate"><span class="pre">dump_rate</span></code> of 5.000 binaries.</p>
<p>In general, the <code class="code docutils literal notranslate"><span class="pre">dump_rate</span></code> should be at least 500 for populations of 100,000 binaries or more.
Setting a very low <code class="code docutils literal notranslate"><span class="pre">dump_rate</span></code> for larger populations can potentially introduce I/O issues during the reading, writing, and merging of output files.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>What should the walltime and job array size be for my population synthesis run?</strong></dt><dd><p>The <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> and job array size are dependent on the number of binaries you want to simulate and the memory usage of the simulation.
The job array size should be set such that the number of binaries per job is at least 1000, since there’s a minimum overhead per job due to loading the grids.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> depends on the number of binaries per job, where each binary takes about 1-2 seconds to run.
For example, 100,000 binaries split over 100 jobs (per metallicity) means that every job runs 1,000 binaries. This will take around 33 minutes per job. So a <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> of <code class="code docutils literal notranslate"><span class="pre">00:45:00</span></code> is reasonable.</p>
<p>The balance between <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> and the size of the job array is important.
If the <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> is too long, it might be worth increasing the job array size to decrease the time per job and allow the population synthesis to finish faster.
But if the <code class="code docutils literal notranslate"><span class="pre">walltime</span></code> is too short, the job array size should be decreased, since each job has an initial overhead that is not dependent on the number of binaries in the job.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The processing time increases if you make the <code class="code docutils literal notranslate"><span class="pre">dump_rate</span></code> too low due to many I/O operations.</p>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>I am unable to open HDF5 files created by POSYDON. What should I do?</strong></dt><dd><p>If you’re on a Mac, there might be an issue with the HDF5 installation.
Make sure you have the <code class="code docutils literal notranslate"><span class="pre">hdf5</span></code> and <code class="code docutils literal notranslate"><span class="pre">pytables</span></code> packages installed through conda in your environment with <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">hdf5</span> <span class="pre">pytables</span></code> before running POSYDON!
Although they are dependencies of POSYDON, sometimes they are not installed correctly on Mac.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Can I run POSYDON on an HPC facility?</strong></dt><dd><p>Absolutely! Refer to <a class="reference internal" href="../tutorials-examples/population-synthesis/pop_syn.html"><span class="doc">our HPC guide</span></a> for detailed instructions on running POSYDON in an HPC environment.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>Help, I’m stuck! Where can I get support?</strong></dt><dd><p>Please check if your question has been answered already on the the POSYDON <a class="reference external" href="https://github.com/POSYDON-code/POSYDON/discussions">Github Discussions</a>.
If it has not yet been answered, please make a new discussion with your question and a detailed description of your problem.</p>
<p>Are you unable to post on Github? Please check <a class="reference external" href="https://groups.google.com/g/posydon-users">our email group</a> or email us at posydon-users [at] googlegroups.com</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>How can I stay updated with the latest features and updates?</strong></dt><dd><p>You can regularly visit our <a class="reference external" href="https://posydon.org">official website</a> for news and updates.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>I’ve come across a FAILED binary. What does this mean?</strong></dt><dd><p>A <code class="code docutils literal notranslate"><span class="pre">FAILED</span></code> binary has encountered an error during the simulation because POSYDON was unable to evolve it. This can be due to a variety of reasons:</p>
<blockquote>
<div><ul class="simple">
<li><p>The evolutionary state of the binary is not represented in the currently supported stellar evolution grids. For example, we do not have a grid for Roche lobe overflow between two helium stars.</p></li>
<li><p>The binary has masses outside the grid range. For example, the HMS-HMS grid does not contain binaries with a secondary mass below 0.5.</p></li>
<li><p>The binary could not be matched to a single star or a binary due to a too large matching error, preventing further evolution.</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>What approximations does POSYDON make?</strong></dt><dd><p>This is a complex question and the best answer is provided in the POSYDON papers: <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2023ApJS..264...45F/abstract">Fragos et al. (2023)</a> and <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2024arXiv241102376A/abstract">Andrews et al. (submitted)</a>.</p>
</dd>
</dl>
</li>
</ol>
</section>
<section id="additional-resources">
<h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Examples and Tutorials</strong>: Learn by doing!</p></li>
<li><p><strong>API Reference</strong>: Dive deep into the functionality provided by POSYDON with our <a class="reference external" href="https://docs.python.org/3/library/modules.html#modules" title="(in Python v3.13)"><span class="xref std std-ref">API Reference</span></a>.</p></li>
<li><p><strong>Github Discussions</strong>: Engage with the community, ask questions, and share your experiences on our <a class="reference external" href="https://github.com/POSYDON-code/POSYDON/discussions">GitHub Discussions</a> page.</p></li>
</ol>
</section>
<section id="still-have-questions">
<h2>Still Have Questions?<a class="headerlink" href="#still-have-questions" title="Link to this heading"></a></h2>
<p>If your question remains unanswered, we’re here to help! Reach out to our community through the <a class="reference internal" href="../contact-support/contact-information.html#contact-info"><span class="std std-ref">support channels</span></a> or consider checking our <a class="reference internal" href="installation-issues.html#installation-issues"><span class="std std-ref">general installation FAQ</span></a> for non-usage related questions.</p>
<p>Your feedback helps us improve the code and documentation. If you think a common question should be added here, don’t hesitate to suggest it!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation-issues.html" class="btn btn-neutral float-left" title="Common Installation Issues" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../contributing/how-to-contribute.html" class="btn btn-neutral float-right" title="How To Contribute" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Tassos Fragos.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      Version: 2.0.2
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        
        <dl>
            <dt> v2</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v2.0.4/index.html">2.0</a></dd>
            
        </dl>
        
        <dl>
            <dt> v1</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v1.0.5/index.html">1.0</a></dd>
            
        </dl>
        
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>