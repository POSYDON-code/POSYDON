<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Making the Violin Plot &mdash; posydon 1.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Licence" href="../about/licence.html" />
    <link rel="prev" title="Van den Heuvel diagrams" href="../visualization/VHD/VHD.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            posydon
          </a>
              <div class="version">
                1.0.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">Data Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Application Programming Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Binary Star Grids</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../run_mesa_grids/inifile.html">.ini file documentation for POSYDON GRIDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_mesa_grids/fixed/fixed.html">Run a fixed MESA grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PSyGrid/PSyGrid.html">The PSyGrid Object</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Generating Populations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pop_synth/POSYDON_populations.html">Running populations using POSYDON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pop_synth/pop_synth.html">Running a POSYDON population synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pop_synth/custom_flow.html">Custom population synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SingleStar/SingleStar.html">The SingleStar object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BinaryStar/BinaryStar.html">The BinaryStar object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_pop_options/custom_hooks.html">Evolutionary Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_pop_options/debugging_binaries.html">Debugging Failed Binaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="IF-Interpolator/IFInterpolator.html">Initial-Final Interpolation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plotting</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../visualization/plot1D/plot1D.html">1D plotting functionalities for POSYDON GRIDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/plot2D/plot2D.html">2D plotting functionalities for POSYDON GRIDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/VHD/VHD.html">Van den Heuvel diagrams</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Making the Violin Plot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#code-for-making-posydon-printing-interpolation-errors">Code for making POSYDON printing interpolation errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#printing-out-the-errors-on-screen-for-desired-physical-quantities">Printing out the errors on-screen for desired physical quantities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-script-for-making-the-violin-plots">The script for making the violin plots</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/licence.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/attribution.html">Attribution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">posydon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Making the Violin Plot</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/interpolation/violinplot.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="making-the-violin-plot">
<span id="violinplot"></span><h1>Making the Violin Plot<a class="headerlink" href="#making-the-violin-plot" title="Permalink to this headline"></a></h1>
<p>To make the violin plot, edits in the code are needed to make the code print the interpolation errors for the quantities. Go to the file IF_interpolation.py with your preferred code editor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">your_path_to_the_POSYDON_top_directory</span><span class="o">/</span><span class="n">posydon</span><span class="o">/</span><span class="n">interpolation</span><span class="o">/</span><span class="n">IF_interpolation</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<section id="code-for-making-posydon-printing-interpolation-errors">
<h2>Code for making POSYDON printing interpolation errors<a class="headerlink" href="#code-for-making-posydon-printing-interpolation-errors" title="Permalink to this headline"></a></h2>
<p>To avoid training the data with different algorithms again, we use the interpolator directly for saving computational time. Here we show an example of asking the code to print out the errors when using linear3c interpolation with the kNN (K-Nearest Neighbor algorithm) classification method. In the IF_interpolation.py, please comment the lines below to make the code skip other algorithms (e.g. 1st-Nearest Neighbor).Code for making POSYDON printing interpolation errors</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#interp_method, class_method = &quot;linear&quot;, &quot;kNN&quot;</span>
<span class="c1">#mlin = IFInterpolator(grid=grid_T, interp_method=interp_method,class_method=class_method)</span>
<span class="c1">#name = &quot;IF_&quot; + dat + &#39;_&#39; + interp_method + &quot;_&quot; + class_method + &quot;.pkl&quot;</span>
<span class="c1">#mlin.save(os.path.join(path2obj, name))</span>

<span class="c1">#interp_method, class_method = &quot;1NN&quot;, &quot;1NN&quot;</span>
<span class="c1">#m1NN = IFInterpolator(grid=grid_T, interp_method=interp_method,class_method=class_method)</span>
<span class="c1">#name = &quot;IF_&quot; + dat + &#39;_&#39; + interp_method + &quot;_&quot; + class_method + &quot;.pkl&quot;</span>
<span class="c1">#m1NN.save(os.path.join(path2obj, name))</span>
</pre></div>
</div>
<p>Instead of training the grid again, the next step is to give the path of the interpolator at mMC and change the interpolation method as linear3c.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#mMC = IFInterpolator(grid=grid_T, interp_method=interp_method,class_method=class_method, interp_classes=classes)</span>
<span class="n">mMC</span> <span class="o">=</span> <span class="n">IFInterpolator</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;your_path_to_the_interpolator&#39;</span><span class="p">)</span>
<span class="n">interp_method</span> <span class="o">=</span> <span class="s2">&quot;linear3c&quot;</span>
</pre></div>
</div>
<p>And make sure only one algorithm is used for interpolation and classification to save time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#assess_models([m1NN, mlin, mMC], grid_T, grid_t, ux2, path=path2figs)</span>
<span class="n">assess_models</span><span class="p">([</span><span class="n">mMC</span><span class="p">],</span> <span class="n">grid_T</span><span class="p">,</span> <span class="n">grid_t</span><span class="p">,</span> <span class="n">ux2</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path2figs</span><span class="p">)</span>
</pre></div>
</div>
<p>Another chunk of code that could be commented out to save computational time is shown below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">## Assess classification results</span>
<span class="c1">#print(&quot;\n\n#### Classification ######################################&quot;)</span>

<span class="c1">#for key in models[0].classifiers:</span>
    <span class="c1">#print(f&quot;\n   Classification for [{key}]:&quot;)</span>
    <span class="c1">#if models[0].classifiers[key] is not None:</span>
        <span class="c1">#for c in uic:</span>
            <span class="c1">#f = grid_T.final_values[&#39;interpolation_class&#39;] == c</span>
            <span class="c1">#print(f&quot;\t{c}: [{np.sum(grid_T.final_values[key][f] == &#39;None&#39;)}/{np.sum(f)}] NaNs&quot;)</span>

        <span class="c1">## Ground Truth</span>
        <span class="c1">#zt_gt = grid_t.final_values[key][validt &gt;= 0]</span>
        <span class="c1">## Confusion Matrices</span>
        <span class="c1">#for i, m in enumerate(models):</span>
            <span class="c1">#print(f&quot;\n\t  {m.classifiers[key].method}&quot;)</span>
            <span class="c1">#bas = balanced_accuracy_score(zt_gt, Ztpred[i][key])</span>
            <span class="c1">#print(f&quot;\t  Balanced Accuracy Score: {100 * bas:.3f}&quot;)</span>
            <span class="c1">#oa = np.sum(Ztpred[i][key] == zt_gt) / len(zt_gt)</span>
            <span class="c1">#print(f&quot;\t  Overall Accuracy: {100 * oa:.3f}&quot;)</span>
            <span class="c1">#CM = confusion_matrix(zt_gt, Ztpred[i][key], m.classifiers[key].labels)</span>
            <span class="c1">#savename = os.path.join(path2prmaps, key + &#39;_&#39; + class_methods[i] + &#39;.png&#39;)</span>
            <span class="c1">#fig, ax = plot_conf_matrix(100 * CM, m.classifiers[key].method, key, m.classifiers[key].labels,savename=savename)</span>
            <span class="c1">#plt.close(fig)</span>

            <span class="c1">#ZT = grid_T.final_values[key][m.valid &gt;= 0]</span>
            <span class="c1">#zt_gt = grid_t.final_values[key][validt &gt;= 0]</span>
            <span class="c1">#fig, ax = plot_mc_classifier(m, key, m.XT[m.valid &gt;= 0, :], ZT, ux2, Xt=Xt[validt &gt;= 0], zt=zt_gt,zt_pred=Ztpred[i][key], path=path2prmaps)</span>
    <span class="c1">#else:</span>
        <span class="c1">#print(f&quot;\tNaN&quot;)</span>
</pre></div>
</div>
</section>
<section id="printing-out-the-errors-on-screen-for-desired-physical-quantities">
<h2>Printing out the errors on-screen for desired physical quantities<a class="headerlink" href="#printing-out-the-errors-on-screen-for-desired-physical-quantities" title="Permalink to this headline"></a></h2>
<p>To access the value of the errors, the below code should be implemented in “Assess interpolation results”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ygt</span> <span class="o">=</span> <span class="n">Yt</span><span class="p">[</span><span class="n">validt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="c1"># this line is from the original IF_interpolation.py, using for indicating where to start the new code</span>

<span class="n">Xgt</span> <span class="o">=</span> <span class="n">Xt</span><span class="p">[</span><span class="n">validt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">grid_t</span><span class="o">.</span><span class="n">final_values</span><span class="p">[</span><span class="s1">&#39;interpolation_class&#39;</span><span class="p">][</span><span class="n">validt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;stable_MT&#39;</span>
<span class="n">mask2</span> <span class="o">=</span> <span class="n">grid_t</span><span class="o">.</span><span class="n">final_values</span><span class="p">[</span><span class="s1">&#39;interpolation_class&#39;</span><span class="p">][</span><span class="n">validt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;unstable_MT&#39;</span>
<span class="n">mask3</span> <span class="o">=</span> <span class="n">grid_t</span><span class="o">.</span><span class="n">final_values</span><span class="p">[</span><span class="s1">&#39;interpolation_class&#39;</span><span class="p">][</span><span class="n">validt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;no_MT&#39;</span>
</pre></div>
</div>
<p>The above code is to compute a mask which is an array of booleans with true in the places where the evolutionary track has stable mass transfer/unstable mass transfer/no mass transfer.</p>
<p>In the loop under the definition of the list err_r and err_a, the new code below should be implemented. Here we show an example of printing the error for system age and the star 1 mass.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">err_a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">Ytpred</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">Ygt</span><span class="p">))</span> <span class="c1"># this line is from the original IF_interpolation.py, using for indicating where to start the new code</span>
<span class="n">err_r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">err_a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">Ygt</span><span class="p">)))</span> <span class="c1"># this line is from the original IF_interpolation.py, using for indicating where to start the new code</span>

<span class="n">mykeys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;star_1_mass&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">mykey</span> <span class="ow">in</span> <span class="n">mykeys</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">elems</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)][</span><span class="n">ii</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==============================&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">elems</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask2</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask2</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)][</span><span class="n">ii</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==============================&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">elems</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask3</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">err_r</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="n">mask3</span> <span class="o">==</span> <span class="kc">True</span><span class="p">])[</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out_keys</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mykey</span><span class="p">)][</span><span class="n">ii</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==============================&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code will print the error from the stable mass transfer, unstable mass transfer and no mass transfer errors for system age and star 1 mass. You may also print the errors in a file and make a violin plot using the code below.</p>
<p>The full list of physical quantities that we could access the errors for the CO-HMS and CO-HeMS grid is as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age</span>
<span class="n">star_1_mass</span>
<span class="n">star_2_mass</span>
<span class="n">period_days</span>
<span class="n">binary_separation</span>
<span class="n">lg_system_mdot_1</span>
<span class="n">lg_system_mdot_2</span>
<span class="n">lg_wind_mdot_1</span>
<span class="n">lg_wind_mdot_2</span>
<span class="n">lg_mstar_dot_1</span>
<span class="n">lg_mstar_dot_2</span>
<span class="n">lg_mtransfer_rate</span>
<span class="n">xfer_fraction</span>
<span class="n">rl_relative_overflow_1</span>
<span class="n">rl_relative_overflow_2</span>
<span class="n">trap_radius</span>
<span class="n">acc_radius</span>
<span class="n">t_sync_rad_1</span>
<span class="n">t_sync_conv_1</span>
<span class="n">t_sync_rad_2</span>
<span class="n">t_sync_conv_2</span>
<span class="n">S1_he_core_mass</span>
<span class="n">S1_c_core_mass</span>
<span class="n">S1_o_core_mass</span>
<span class="n">S1_he_core_radius</span>
<span class="n">S1_c_core_radius</span>
<span class="n">S1_o_core_radius</span>
<span class="n">S1_center_h1</span>
<span class="n">S1_center_he4</span>
<span class="n">S1_center_c12</span>
<span class="n">S1_center_n14</span>
<span class="n">S1_center_o16</span>
<span class="n">S1_surface_h1</span>
<span class="n">S1_surface_he4</span>
<span class="n">S1_surface_c12</span>
<span class="n">S1_surface_n14</span>
<span class="n">S1_surface_o16</span>
<span class="n">S1_c12_c12</span>
<span class="n">S1_center_gamma</span>
<span class="n">S1_avg_c_in_c_core</span>
<span class="n">S1_surf_avg_omega</span>
<span class="n">S1_surf_avg_omega_div_omega_crit</span>
<span class="n">S1_log_LH</span>
<span class="n">S1_log_LHe</span>
<span class="n">S1_log_LZ</span>
<span class="n">S1_log_Lnuc</span>
<span class="n">S1_log_Teff</span>
<span class="n">S1_log_L</span>
<span class="n">S1_log_R</span>
<span class="n">S1_total_moment_of_inertia</span>
<span class="n">S1_spin_parameter</span>
<span class="n">S1_log_total_angular_momentum</span>
<span class="n">S1_conv_env_top_mass</span>
<span class="n">S1_conv_env_bot_mass</span>
<span class="n">S1_conv_env_top_radius</span>
<span class="n">S1_conv_env_bot_radius</span>
<span class="n">S1_conv_env_turnover_time_g</span>
<span class="n">S1_conv_env_turnover_time_l_b</span>
<span class="n">S1_conv_env_turnover_time_l_t</span>
<span class="n">S1_envelope_binding_energy</span>
<span class="n">S1_mass_conv_reg_fortides</span>
<span class="n">S1_thickness_conv_reg_fortides</span>
<span class="n">S1_radius_conv_reg_fortides</span>
<span class="n">S1_lambda_CE_1cent</span>
<span class="n">S1_lambda_CE_10cent</span>
<span class="n">S1_lambda_CE_30cent</span>
<span class="n">S1_co_core_mass</span>
<span class="n">S1_co_core_radius</span>
<span class="n">S1_lambda_CE_pure_He_star_10cent</span>
<span class="n">S1_direct_f_fb</span>
<span class="n">S1_direct_mass</span>
<span class="n">S1_direct_spin</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_f_fb</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_mass</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_spin</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_f_fb</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_mass</span>
<span class="n">S1_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_spin</span>
<span class="n">S1_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_f_fb</span>
<span class="n">S1_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_mass</span>
<span class="n">S1_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_spin</span>
<span class="n">S1_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_f_fb</span>
<span class="n">S1_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_mass</span>
<span class="n">S1_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_spin</span>
<span class="n">S1_avg_c_in_c_core_at_He_depletion</span>
<span class="n">S1_co_core_mass_at_He_depletion</span>
<span class="n">S1_m_core_CE_1cent</span>
<span class="n">S1_m_core_CE_10cent</span>
<span class="n">S1_m_core_CE_30cent</span>
<span class="n">S1_m_core_CE_pure_He_star_10cent</span>
<span class="n">S1_r_core_CE_1cent</span>
<span class="n">S1_r_core_CE_10cent</span>
<span class="n">S1_r_core_CE_30cent</span>
<span class="n">S1_r_core_CE_pure_He_star_10cent</span>
<span class="n">S1_surface_other</span>
<span class="n">S1_center_other</span>
</pre></div>
</div>
<p>For the HMS-HMS grid, as both of the stars are evolved, the list of errors of the star 2 related physical quantities shows below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2_he_core_mass</span>
<span class="n">S2_c_core_mass</span>
<span class="n">S2_o_core_mass</span>
<span class="n">S2_he_core_radius</span>
<span class="n">S2_c_core_radius</span>
<span class="n">S2_o_core_radius</span>
<span class="n">S2_center_h1</span>
<span class="n">S2_center_he4</span>
<span class="n">S2_center_c12</span>
<span class="n">S2_center_n14</span>
<span class="n">S2_center_o16</span>
<span class="n">S2_surface_h1</span>
<span class="n">S2_surface_he4</span>
<span class="n">S2_surface_c12</span>
<span class="n">S2_surface_n14</span>
<span class="n">S2_surface_o16</span>
<span class="n">S2_c12_c12</span>
<span class="n">S2_center_gamma</span>
<span class="n">S2_avg_c_in_c_core</span>
<span class="n">S2_surf_avg_omega</span>
<span class="n">S2_surf_avg_omega_div_omega_crit</span>
<span class="n">S2_log_LH</span>
<span class="n">S2_log_LHe</span>
<span class="n">S2_log_LZ</span>
<span class="n">S2_log_Lnuc</span>
<span class="n">S2_log_Teff</span>
<span class="n">S2_log_L</span>
<span class="n">S2_log_R</span>
<span class="n">S2_total_moment_of_inertia</span>
<span class="n">S2_spin_parameter</span>
<span class="n">S2_log_total_angular_momentum</span>
<span class="n">S2_conv_env_top_mass</span>
<span class="n">S2_conv_env_bot_mass</span>
<span class="n">S2_conv_env_top_radius</span>
<span class="n">S2_conv_env_bot_radius</span>
<span class="n">S2_conv_env_turnover_time_g</span>
<span class="n">S2_conv_env_turnover_time_l_b</span>
<span class="n">S2_conv_env_turnover_time_l_t</span>
<span class="n">S2_envelope_binding_energy</span>
<span class="n">S2_mass_conv_reg_fortides</span>
<span class="n">S2_thickness_conv_reg_fortides</span>
<span class="n">S2_radius_conv_reg_fortides</span>
<span class="n">S2_lambda_CE_1cent</span>
<span class="n">S2_lambda_CE_10cent</span>
<span class="n">S2_lambda_CE_30cent</span>
<span class="n">S2_co_core_mass</span>
<span class="n">S2_co_core_radius</span>
<span class="n">S2_lambda_CE_pure_He_star_10cent</span>
<span class="n">S2_log_L_div_Ledd</span>
<span class="n">S2_direct_f_fb</span>
<span class="n">S2_direct_mass</span>
<span class="n">S2_direct_spin</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_f_fb</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_mass</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">rapid_spin</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_f_fb</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_mass</span>
<span class="n">S2_Fryer</span><span class="o">+</span><span class="mi">12</span><span class="o">-</span><span class="n">delayed_spin</span>
<span class="n">S2_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_f_fb</span>
<span class="n">S2_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_mass</span>
<span class="n">S2_Sukhbold</span><span class="o">+</span><span class="mi">16</span><span class="o">-</span><span class="n">engineN20_spin</span>
<span class="n">S2_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_f_fb</span>
<span class="n">S2_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_mass</span>
<span class="n">S2_Patton</span><span class="o">&amp;</span><span class="n">Sukhbold20</span><span class="o">-</span><span class="n">engineN20_spin</span>
<span class="n">S2_avg_c_in_c_core_at_He_depletion</span>
<span class="n">S2_co_core_mass_at_He_depletion</span>
<span class="n">S2_m_core_CE_1cent</span>
<span class="n">S2_m_core_CE_10cent</span>
<span class="n">S2_m_core_CE_30cent</span>
<span class="n">S2_m_core_CE_pure_He_star_10cent</span>
<span class="n">S2_r_core_CE_1cent</span>
<span class="n">S2_r_core_CE_10cent</span>
<span class="n">S2_r_core_CE_30cent</span>
<span class="n">S2_r_core_CE_pure_He_star_10cent</span>
<span class="n">S2_surface_other</span>
<span class="n">S2_center_other</span>
</pre></div>
</div>
</section>
<section id="the-script-for-making-the-violin-plots">
<h2>The script for making the violin plots<a class="headerlink" href="#the-script-for-making-the-violin-plots" title="Permalink to this headline"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">err_r</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="n">the</span> <span class="n">column</span> <span class="n">number</span> <span class="k">for</span> <span class="n">relative</span> <span class="n">error</span><span class="p">]</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">err_r</span><span class="p">),</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">widths</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">showextrema</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showmedians</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pc</span> <span class="ow">in</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;bodies&#39;</span><span class="p">]:</span>
    <span class="n">pc</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
    <span class="n">pc</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">v</span><span class="p">[</span><span class="s1">&#39;cmedians&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;bodies&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]],[</span><span class="sa">r</span><span class="s1">&#39;$\mathrm{no\,mass \mbox{-} transfer}$&#39;</span><span class="p">],</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/noMT_error.png"><img alt="../_images/noMT_error.png" src="../_images/noMT_error.png" style="width: 400px;" /></a>
<p>For making a violin plot with half of the error distribution from stable mass transfer and another half of unstable mass transfer, you may use the code below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="n">filename_of_errors_from_stable_mass_transfer</span><span class="p">)</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="n">filename_of_errors_from_unstable_mass_transfer</span><span class="p">)</span>
<span class="n">err_r</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="n">the</span> <span class="n">column</span> <span class="n">number</span> <span class="k">for</span> <span class="n">relative</span> <span class="n">error</span><span class="p">]</span>
<span class="n">err_r2</span> <span class="o">=</span> <span class="n">data2</span><span class="p">[:,</span><span class="n">the</span> <span class="n">column</span> <span class="n">number</span> <span class="k">for</span> <span class="n">relative</span> <span class="n">error</span><span class="p">]</span>

<span class="n">v1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">err_r</span><span class="p">),</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">widths</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">showextrema</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showmedians</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">v1</span><span class="p">[</span><span class="s1">&#39;bodies&#39;</span><span class="p">]:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># get the center</span>
    <span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="c1"># modify the paths to not go further right than the center</span>
    <span class="n">b</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">v1</span><span class="p">[</span><span class="s1">&#39;cmedians&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">bb</span> <span class="o">=</span> <span class="n">v1</span><span class="p">[</span><span class="s1">&#39;cmedians&#39;</span><span class="p">]</span>
<span class="n">mm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># get the center</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">mm</span><span class="p">)</span>


<span class="n">v2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">err_r2</span><span class="p">),</span> <span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">widths</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">showextrema</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showmedians</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">v2</span><span class="p">[</span><span class="s1">&#39;bodies&#39;</span><span class="p">]:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">m</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">v2</span><span class="p">[</span><span class="s1">&#39;cmedians&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">bb</span> <span class="o">=</span> <span class="n">v2</span><span class="p">[</span><span class="s1">&#39;cmedians&#39;</span><span class="p">]</span>
<span class="n">mm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span> <span class="c1"># get the center</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">bb</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">mm</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/stable_unstable_error.png"><img alt="../_images/stable_unstable_error.png" src="../_images/stable_unstable_error.png" style="width: 400px;" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../visualization/VHD/VHD.html" class="btn btn-neutral float-left" title="Van den Heuvel diagrams" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../about/licence.html" class="btn btn-neutral float-right" title="Licence" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Tassos Fragos.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      Version: 1.0.4
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        
        <dl>
            <dt> v2</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v2.0.6/index.html">2.0</a></dd>
            
            <dd><a href="https://posydon.org/POSYDON/v2.1.7/index.html">2.1</a></dd>
            
            <dd><a href="https://posydon.org/POSYDON/v2.2.2/index.html">2.2</a></dd>
            
        </dl>
        
        <dl>
            <dt> v1</dt>
            
            <dd><a href="https://posydon.org/POSYDON/v1.0.5/index.html">1.0</a></dd>
            
        </dl>
        
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>