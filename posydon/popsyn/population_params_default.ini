# POSYDON default BinaryPopulation inifile, use ConfigParser syntax

[environment_variables]
  PATH_TO_POSYDON = '<PATH_TO_POSYDON>'


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;  SimulationProperties  ;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[flow]
  import = ['posydon.binary_evol.flow_chart', 'flow_chart']
    # builtin posydon flow
  absolute_import = None
    # if given, use an absolute filepath to user defined flow:
    # ['<PATH_TO_PY_FILE>', '<NAME>']

[step_HMS_HMS]
  import = ['posydon.binary_evol.MESA.step_mesa', 'MS_MS_step']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  interpolation_path = None
    # str or None (found by default)
  interpolation_filename = None
    # str or None (found by default)
  interpolation_method = 'linear3c_kNN'
    # 'nearest_neighbour', 'linear3c_kNN', '1NN_1NN'
  save_initial_conditions = True
    # True, False (only for interpolation_method='nearest_neighbour')
  track_interpolation = False
    # True, False
  stop_method = 'stop_at_max_time'
    # 'stop_at_end', 'stop_at_max_time', 'stop_at_condition'
  stop_star = 'star_1'
    # 'star_1', 'star_2' (only for stop_method='stop_at_condition')
  stop_var_name = None
    # str or None (only for stop_method='stop_at_condition')
  stop_value = None
    # float or None (only for stop_method='stop_at_condition')
  stop_interpolate = True
    # True, False
  verbose = False
    # True, False


[step_CO_HeMS]
  import = ['posydon.binary_evol.MESA.step_mesa', 'CO_HeMS_step']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  interpolation_path = None
    # str or None (found by default)
  interpolation_filename = None
    # str or None (found by default)
  interpolation_method = 'linear3c_kNN'
    # 'nearest_neighbour', 'linear3c_kNN', '1NN_1NN'
  save_initial_conditions = True
    # True, False (only for interpolation_method='nearest_neighbour')
  track_interpolation = False
    # True, False
  stop_method = 'stop_at_max_time'
    # 'stop_at_end', 'stop_at_max_time', 'stop_at_condition'
  stop_star = 'star_1'
    # 'star_1', 'star_2' (only for stop_method='stop_at_condition')
  stop_var_name = None
    # str or None (only for stop_method='stop_at_condition')
  stop_value = None
    # float or None (only for stop_method='stop_at_condition')
  stop_interpolate = True
    # True, False
  verbose = False
    # True, False

[step_CO_HMS_RLO]
  import = ['posydon.binary_evol.MESA.step_mesa', 'CO_HMS_RLO_step']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  interpolation_path = None
    # str or None (found by default)
  interpolation_filename = None
    # str or None (found by default)
  interpolation_method = 'linear3c_kNN'
    # 'nearest_neighbour', 'linear3c_kNN', '1NN_1NN'
  save_initial_conditions = True
    # True, False (only for interpolation_method='nearest_neighbour')
  track_interpolation = False
    # True, False
  stop_method = 'stop_at_max_time'
    # 'stop_at_end' 'stop_at_max_time' 'stop_at_condition'
  stop_star = 'star_1'
    # 'star_1', 'star_2' (only for stop_method='stop_at_condition')
  stop_var_name = None
    # str or None (only for stop_method='stop_at_condition')
  stop_value = None
    # float or None (only for stop_method='stop_at_condition')
  stop_interpolate = True
    # True, False
  verbose = False
    # True, False

[step_CO_HeMS_RLO]
  import = ['posydon.binary_evol.MESA.step_mesa', 'CO_HeMS_RLO_step']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  interpolation_path = None
    # str or None (found by default)
  interpolation_filename = None
    # str or None (found by default)
  interpolation_method = 'linear3c_kNN'
    # 'nearest_neighbour', 'linear3c_kNN', '1NN_1NN'
  save_initial_conditions = True
    # True, False (only for interpolation_method='nearest_neighbour')
  track_interpolation = False
    # True, False
  stop_method = 'stop_at_max_time'
    # 'stop_at_end', 'stop_at_max_time', 'stop_at_condition'
  stop_star = 'star_1'
    # 'star_1', 'star_2' (only for stop_method='stop_at_condition')
  stop_var_name = None
    # str or None (only for stop_method='stop_at_condition')
  stop_value = None
    # float or None (only for stop_method='stop_at_condition')
  stop_interpolate = True
    # True, False
  verbose = False
    # True, False


[step_detached]
  import = ['posydon.binary_evol.DT.step_detached', 'detached_step']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  matching_method = 'minimize'
    # 'minimize', 'root'
  matching_tolerance = 1e-2
    # float, DEF: 1e-2
  matching_tolerance_hard = 1e-1
    # float, DEF: 1e-1
  do_wind_loss = True
    # True, False
  do_tides = True
    # True, False
  do_gravitational_radiation = True
    # True, False
  do_magnetic_braking = True
    # True, False
  magnetic_braking_mode = 'RVJ83'
    # 'RVJ83', 'M15', 'G18', 'CARB'
  do_stellar_evolution_and_spin_from_winds = True
    # True, False
  RLO_orbit_at_orbit_with_same_am = False
    # True, False
  record_matching = False
    # True, False
  verbose = False
    # True, False

[step_disrupted]
  import = ['posydon.binary_evol.DT.step_disrupted','DisruptedStep']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  matching_method = 'minimize'
    # 'minimize', 'root'
  matching_tolerance = 1e-2
    # float, DEF: 1e-2
  matching_tolerance_hard = 1e-1
    # float, DEF: 1e-1
  do_wind_loss = True
    # True, False
  do_tides = True
    # True, False
  do_gravitational_radiation = True
    # True, False
  do_magnetic_braking = True
    # True, False
  magnetic_braking_mode = 'RVJ83'
    # 'RVJ83', 'M15', 'G18', 'CARB'
  do_stellar_evolution_and_spin_from_winds = True
    # True, False
  RLO_orbit_at_orbit_with_same_am = False
    # True, False
  record_matching = False
    # True, False
  verbose = False
    # True, False

[step_merged]
  import = ['posydon.binary_evol.DT.step_merged','MergedStep']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']

[step_initially_single]
  import = ['posydon.binary_evol.DT.step_initially_single','InitiallySingleStep']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  matching_method = 'minimize'
    # 'minimize', 'root'
  matching_tolerance = 1e-2
    # float, DEF: 1e-2
  matching_tolerance_hard = 1e-1
    # float, DEF: 1e-1
  record_matching = False
    # True, False
  verbose = False
    # True, False

[step_CE]
  import = ['posydon.binary_evol.CE.step_CEE', 'StepCEE']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  prescription = 'alpha-lambda'
    # 'alpha-lambda'
  common_envelope_efficiency = 1.0
    # float in (0, inf)
    # values >1 are discouraged (consider changing lambda or post CE
    # interactions)
  common_envelope_option_for_lambda = 'lambda_from_grid_final_values'
    # (1) 'default_lambda' (uses common_envelope_lambda_default),
    # (2) 'lambda_from_grid_final_values',
    # (3) 'lambda_from_profile_gravitational' (needs available profiles),
    # (4) 'lambda_from_profile_gravitational_plus_internal' (needs available
    #                                                        profiles),
    # (5) 'lambda_from_profile_gravitational_plus_internal_minus_recombination'
    #      (needs available profiles)
  common_envelope_lambda_default = 0.5
    # float in (0, inf) (only for common_envelope_option_for_lambda option 1)
  common_envelope_option_for_HG_star = "optimistic"
    # 'optimistic', 'pessimistic'
  common_envelope_alpha_thermal = 1.0
    # float in (0, inf) (only for common_envelope_option_for_lambda options 4
    #                    and 5)
  core_definition_H_fraction = 0.3
    # 0.01, 0.1, 0.3
  core_definition_He_fraction = 0.1
    # 0.1
  CEE_tolerance_err = 0.001
    # float (0, inf) (numerical tolerance on floats)
  common_envelope_option_after_succ_CEE = 'two_phases_stableMT'
    # 'two_phases_stableMT' 'one_phase_variable_core_definition'
    # 'two_phases_windloss'
  verbose = False
    # True, False

[step_SN]
  import = ['posydon.binary_evol.SN.step_SN', 'StepSN']
    # builtin posydon step
  absolute_import = None
    # 'package' kwarg for importlib.import_module
  mechanism = 'Fryer+12-delayed'
    # v2 interpolators support: 'Fryer+12-rapid', 'Fryer+12-delayed',
    #                          'Sukhbold+16-engine', 'Patton&Sukhbold20-engine'
    # need profiles: 'direct'
  engine = ''
    # 'N20' or 'W20' for 'Sukhbold+16-engine', 'Patton&Sukhbold20-engine'
    # '' for the others
  PISN = "Hendriks+23"
    # v2 interpolators support: "Hendriks+23"
    # other options: None, "Marchant+19"
  PISN_CO_shift = 0.0
    # Only when using Hendriks+23
    # float (-inf,inf)
    # v2 interpolators support: 0.0
  PPI_extra_mass_loss = -20.0
    # Only when using Hendriks+23
    # float (-inf,inf)
    # v2 interpolators support: 0.0 or -20.0
  ECSN = "Tauris+15"
    # "Tauris+15", "Podsiadlowski+04"
  conserve_hydrogen_envelope = False
    # True, False
  conserve_hydrogen_PPI  = False
    # Only when using Hendriks+23
    # True, False
  max_neutrino_mass_loss = 0.5
    # float (0,inf)
    # v2 interpolators support: 0.5
  max_NS_mass = 2.5
    # float (0,inf)
    # v2 interpolators support: 2.5
  use_interp_values = True
    # True, False
  use_profiles = True
    # True, False
  use_core_masses = True
    # True, False
  allow_spin_None = False
    # True, False
  approx_at_he_depletion = False
    # True, False
  kick = True
    # True, False
  kick_normalisation = 'one_over_mass'
    # "one_minus_fallback", "one_over_mass", "NS_one_minus_fallback_BH_one",
    # "one", "zero", "asym_ej", "linear", "log_normal"
  sigma_kick_CCSN_NS = 265.0
    # float (0,inf)
  sigma_kick_CCSN_BH = 265.0
    # float (0,inf)
  sigma_kick_ECSN = 20.0
    # float (0,inf)
  verbose = False
    # True, False

[step_dco]
  import = ['posydon.binary_evol.DT.double_CO', 'DoubleCO']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  n_o_steps_history = None
    # None or int (0, inf)

[step_end]
  import = ['posydon.binary_evol.step_end', 'step_end']
    # builtin posydon step
  absolute_import = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']

[extra_hooks]
  import_1 = ['posydon.binary_evol.simulationproperties', 'TimingHooks']
    # builtin posydon hook
  absolute_import_1 = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  kwargs_1 = {}
    # dict

  import_2 = ['posydon.binary_evol.simulationproperties', 'StepNamesHooks']
    # builtin posydon hook
  absolute_import_2 = None
    # if given, use an absolute filepath to user defined step:
    # ['<PATH_TO_PY_FILE>', '<NAME>']
  kwargs_2 = {}
    # dict


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;  BinaryPopulation  ;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[BinaryPopulation_options]
  optimize_ram = True
    # save population in batches: True, False
  ram_per_cpu = None
    # set maximum ram per cpu before batch saving (GB); None or float (0, inf)
  dump_rate = 2000
    # batch save after evolving N binaries: int (0, inf)
    # this should be at least 500 for populations of 100,000 binaries or more
  temp_directory = 'batches'
    # temporary folder for keeping batch files: str
  tqdm = False
    # progress bar: True, False
  breakdown_to_df = True
    # convert BinaryStars into DataFrames after evolution: True, False
  use_MPI = False
    # use only for local MPI runs: True, False
  metallicity = [1.]
    # in units of solar metallicity: list of float
    # e.g. [2., 1., 0.45, 0.2, 0.1, 0.01, 0.001, 0.0001]
  error_checking_verbose = False
    # if True, write all POSYDON errors to stderr at runtime, default=False
  warnings_verbose = False
    # if True, write all POSYDON warnings to stderr at runtime, default=False
  history_verbose = False
    # if True, record extra functional steps in the output DataFrames
    # (These steps represent internal workings of POSYDON rather than physical
    #  phases of evolution)
  entropy = None
    # if None uses system entropy (recommended): None or int
  number_of_binaries = 10
    # int (0, inf)
  binary_fraction_scheme = 'const'
    # 'const', 'Moe+17-massdependent'
  binary_fraction_const  = 1.0
    # float [0, 1]
  star_formation = 'burst'
    # 'constant', 'burst', 'custom_linear', 'custom_log10',
    # 'custom_linear_histogram', 'custom_log10_histogram'
  max_simulation_time = 13.8e9
    # float (0, inf)

  read_samples_from_file = ''
    # path to file to read initial parameters from (if empty string get random
    #                                               samples)
  primary_mass_scheme = 'Kroupa2001'
    # 'Salpeter', 'Kroupa1993', 'Kroupa2001'
  primary_mass_min = 7.0
    # float (0, inf)
    # value should be within the mass range given by the used grids
  primary_mass_max = 150.0
    # float (primary_mass_min, inf)
    # value should be within the mass range given by the used grids
  secondary_mass_scheme = 'flat_mass_ratio'
    # 'flat_mass_ratio', 'q=1', 'Moe+17-PsandQs' (will enforce
    #  orbital_period_scheme='Moe+17-PsandQs' and
    #  eccentricity_scheme='Moe+17-PsandQs')
  secondary_mass_min = 0.5
    # float (0,130)
    # value should be within the mass range given by the used grids
  secondary_mass_max = 150.0
    # float (secondary_mass_min, inf)
    # value should be within the mass range given by the used grids
  orbital_scheme = 'period'
    # 'separation', 'period'
  orbital_period_scheme = 'Sana+12_period_extended'
    # (used only for orbital_scheme = 'period') 'Sana+12_period_extended',
    # 'Moe+17-PsandQs' (will enforce secondary_mass_scheme='Moe+17-PsandQs' and
    #                   eccentricity_scheme='Moe+17-PsandQs')
  orbital_period_min = 0.75
    # float (0, inf) (used only for orbital_scheme = 'period')
    # value should be within the period range given by the used grids
  orbital_period_max = 6000.0
    # float (0, inf) (used only for orbital_scheme = 'period')
    # value should be within the period range given by the used grids
#  orbital_separation_scheme = 'log_uniform'
    # 'log_uniform', 'log_normal' (used only for orbital_scheme = 'separation')
#  orbital_separation_min = 5.0
    # float (0, inf) (used only for orbital_scheme = 'separation')
    # value should be within the separation range given by the used grids
#  orbital_separation_max = 1e5
    # float (0, inf) (used only for orbital_scheme = 'separation')
    # value should be within the separation range given by the used grids
#  log_orbital_separation_mean = None
    # float (0, inf) (used only for orbital_separation_scheme ='log_normal')
    # value should be within the separation range given above
#  log_orbital_separation_sigma = None
    # float (0, inf) (used only for orbital_separation_scheme ='log_normal')
    # value should respect the separation range given above
  eccentricity_scheme = 'zero'
    # 'zero', 'thermal', 'uniform', 'Moe+17-PsandQs' (will enforce
    #  secondary_mass_scheme='Moe+17-PsandQs' and
    #  orbital_period_scheme='Moe+17-PsandQs')


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;  Saving Output  ;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[BinaryStar_output]
  extra_columns = {'step_names': 'string', 'step_times': 'float64'}
    # columns usually provided by hooks
    # e.g. 'step_times' from TimingHooks, 'step_names' from StepNamesHooks

  # LIST BINARY PROPERTIES
  only_select_columns = [
                         'state',
                         'event',
                         'time',
                         #'separation',
                         'orbital_period',
                         'eccentricity',
                         #'V_sys',
                         #'rl_relative_overflow_1',
                         #'rl_relative_overflow_2',
                         'lg_mtransfer_rate',
                         #'mass_transfer_case',
                         #'trap_radius',
                         #'acc_radius',
                         #'t_sync_rad_1',
                         #'t_sync_conv_1',
                         #'t_sync_rad_2',
                         #'t_sync_conv_2',
                         #'nearest_neighbour_distance',
                        ]
  scalar_names = [
                  'interp_class_HMS_HMS',
                  'interp_class_CO_HMS_RLO',
                  'interp_class_CO_HeMS',
                  'interp_class_CO_HeMS_RLO',
                  'mt_history_HMS_HMS',
                  'mt_history_CO_HMS_RLO',
                  'mt_history_CO_HeMS',
                  'mt_history_CO_HeMS_RLO',
                 ]

[SingleStar_1_output]
  # LIST STAR PROPERTIES TO SAVE
  include_S1 = True
    # True, False
  only_select_columns = [
                         'state',
                         #'metallicity',
                         'mass',
                         'log_R',
                         'log_L',
                         'lg_mdot',
                         #'lg_system_mdot',
                         #'lg_wind_mdot',
                         'he_core_mass',
                         'he_core_radius',
                         #'c_core_mass',
                         #'c_core_radius',
                         #'o_core_mass',
                         #'o_core_radius',
                         'co_core_mass',
                         'co_core_radius',
                         'center_h1',
                         'center_he4',
                         #'center_c12',
                         #'center_n14',
                         #'center_o16',
                         'surface_h1',
                         'surface_he4',
                         #'surface_c12',
                         #'surface_n14',
                         #'surface_o16',
                         #'log_LH',
                         #'log_LHe',
                         #'log_LZ',
                         #'log_Lnuc',
                         #'c12_c12',
                         #'center_gamma',
                         #'avg_c_in_c_core',
                         #'surf_avg_omega',
                         'surf_avg_omega_div_omega_crit',
                         #'total_moment_of_inertia',
                         #'log_total_angular_momentum',
                         'spin',
                         #'conv_env_top_mass',
                         #'conv_env_bot_mass',
                         #'conv_env_top_radius',
                         #'conv_env_bot_radius',
                         #'conv_env_turnover_time_g',
                         #'conv_env_turnover_time_l_b',
                         #'conv_env_turnover_time_l_t',
                         #'envelope_binding_energy',
                         #'mass_conv_reg_fortides',
                         #'thickness_conv_reg_fortides',
                         #'radius_conv_reg_fortides',
                         #'lambda_CE_1cent',
                         #'lambda_CE_10cent',
                         #'lambda_CE_30cent',
                         #'lambda_CE_pure_He_star_10cent',
                         #'profile',
                         #'total_mass_h1',
                         #'total_mass_he4',
                        ]
  scalar_names = [
                  'natal_kick_array', # each value accessed by natal_kick_array_0 up to 3
                  'spin_orbit_tilt_first_SN',
                  'spin_orbit_tilt_second_SN',
                  'f_fb',
                  'SN_type',
                  #'m_disk_accreted',
                  #'m_disk_radiated',
                  'h1_mass_ej',
                  'he4_mass_ej',
                  #'M4',
                  #'mu4',
                  'avg_c_in_c_core_at_He_depletion',
                  'co_core_mass_at_He_depletion',
                  #'m_core_CE_1cent',
                  #'m_core_CE_10cent',
                  #'m_core_CE_30cent',
                  #'m_core_CE_pure_He_star_10cent',
                  #'r_core_CE_1cent',
                  #'r_core_CE_10cent',
                  #'r_core_CE_30cent',
                  #'r_core_CE_pure_He_star_10cent'
               ]

[SingleStar_2_output]
  # LIST STAR PROPERTIES TO SAVE
  include_S2 = True
    # True, False
  only_select_columns = [
                         'state',
                         #'metallicity',
                         'mass',
                         'log_R',
                         'log_L',
                         'lg_mdot',
                         #'lg_system_mdot',
                         #'lg_wind_mdot',
                         'he_core_mass',
                         'he_core_radius',
                         #'c_core_mass',
                         #'c_core_radius',
                         #'o_core_mass',
                         #'o_core_radius',
                         'co_core_mass',
                         'co_core_radius',
                         'center_h1',
                         'center_he4',
                         #'center_c12',
                         #'center_n14',
                         #'center_o16',
                         'surface_h1',
                         'surface_he4',
                         #'surface_c12',
                         #'surface_n14',
                         #'surface_o16',
                         #'log_LH',
                         #'log_LHe',
                         #'log_LZ',
                         #'log_Lnuc',
                         #'c12_c12',
                         #'center_gamma',
                         #'avg_c_in_c_core',
                         #'surf_avg_omega',
                         'surf_avg_omega_div_omega_crit',
                         #'total_moment_of_inertia',
                         #'log_total_angular_momentum',
                         'spin',
                         #'conv_env_top_mass',
                         #'conv_env_bot_mass',
                         #'conv_env_top_radius',
                         #'conv_env_bot_radius',
                         #'conv_env_turnover_time_g',
                         #'conv_env_turnover_time_l_b',
                         #'conv_env_turnover_time_l_t',
                         #'envelope_binding_energy',
                         #'mass_conv_reg_fortides',
                         #'thickness_conv_reg_fortides',
                         #'radius_conv_reg_fortides',
                         #'lambda_CE_1cent',
                         #'lambda_CE_10cent',
                         #'lambda_CE_30cent',
                         #'lambda_CE_pure_He_star_10cent',
                         #'profile',
                         #'total_mass_h1',
                         #'total_mass_he4',
                        ]
  scalar_names = [
                  'natal_kick_array', # each value accessed by natal_kick_array_0 up to 3
                  'spin_orbit_tilt_first_SN',
                  'spin_orbit_tilt_second_SN',
                  'f_fb',
                  'SN_type',
                  #'m_disk_accreted',
                  #'m_disk_radiated',
                  'h1_mass_ej',
                  'he4_mass_ej',
                  #'M4',
                  #'mu4',
                  'avg_c_in_c_core_at_He_depletion',
                  'co_core_mass_at_He_depletion',
                  #'m_core_CE_1cent',
                  #'m_core_CE_10cent',
                  #'m_core_CE_30cent',
                  #'m_core_CE_pure_He_star_10cent',
                  #'r_core_CE_1cent',
                  #'r_core_CE_10cent',
                  #'r_core_CE_30cent',
                  #'r_core_CE_pure_He_star_10cent'
               ]
